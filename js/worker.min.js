const db_url=`${location.protocol}//${location.hostname}:1337`;class Actions{static fetchData(t){return fetch(t).then(t=>t.json())}static postReview(t){return fetch(`${db_url}/reviews/`,{method:"POST",body:"string"==typeof t?t:JSON.stringify(t)}).then(t=>t.json())}static fav(t,e){return fetch(`${db_url}/restaurants/${t}/?is_favorite=${e}`,{method:"PUT"}).then(t=>t.json())}}self.addEventListener("message",function({data:{type:t,...e}}){"fetch_data"===t?Actions.fetchData(e).then(t=>{self.postMessage({state:"done",data:t})}):"post_review"===t?Actions.postReview(e).then(t=>{self.postMessage({state:"done",data:t})}).catch(t=>{self.postMessage({state:"err",err:t})}):"fav"===t&&Actions.fav(e).then(t=>{self.postMessage({state:"done",data:t})}).catch(t=>{self.postMessage({state:"err",err:t})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndvcmtlci5qcyJdLCJuYW1lcyI6WyJkYl91cmwiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdG5hbWUiLCJBY3Rpb25zIiwiW29iamVjdCBPYmplY3RdIiwidXJsIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwianNvbiIsImRhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImlkIiwiYWN0Iiwic2VsZiIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0eXBlIiwicmVzdCIsImZldGNoRGF0YSIsInBvc3RNZXNzYWdlIiwic3RhdGUiLCJwb3N0UmV2aWV3IiwiY2F0Y2giLCJlcnIiLCJmYXYiXSwibWFwcGluZ3MiOiJBQUNBLE1BQU1BLFVBQVlDLFNBQVNDLGFBQWFELFNBQVNFLGdCQUVqRCxNQUFNQyxRQUNKQyxpQkFBaUJDLEdBQ2YsT0FBT0MsTUFBTUQsR0FBS0UsS0FBS0MsR0FBT0EsRUFBSUMsUUFFcENMLGtCQUFrQk0sR0FDaEIsT0FBT0osU0FBU1Asa0JBQW1CLENBQ2pDWSxPQUFRLE9BQ1JDLEtBQXNCLGlCQUFURixFQUFvQkEsRUFBT0csS0FBS0MsVUFBVUosS0FDdERILEtBQUtDLEdBQU9BLEVBQUlDLFFBRXJCTCxXQUFXVyxFQUFJQyxHQUNiLE9BQU9WLFNBQVNQLHNCQUFzQmdCLGtCQUFtQkMsSUFBTyxDQUM5REwsT0FBUSxRQUNQSixLQUFLQyxHQUFPQSxFQUFJQyxTQUl2QlEsS0FBS0MsaUJBQWlCLFVBQVcsVUFBV1IsTUFBTVMsS0FBRUEsS0FBU0MsS0FDOUMsZUFBVEQsRUFDRmhCLFFBQVFrQixVQUFVRCxHQUFNYixLQUFLRyxJQUMzQk8sS0FBS0ssWUFBWSxDQUFFQyxNQUFPLE9BQVFiLEtBQUFBLE1BRWxCLGdCQUFUUyxFQUNUaEIsUUFBUXFCLFdBQVdKLEdBQ2hCYixLQUFLRyxJQUNKTyxLQUFLSyxZQUFZLENBQUVDLE1BQU8sT0FBUWIsS0FBQUEsTUFFbkNlLE1BQU1DLElBQ0xULEtBQUtLLFlBQVksQ0FBRUMsTUFBTyxNQUFPRyxJQUFBQSxNQUVuQixRQUFUUCxHQUNUaEIsUUFBUXdCLElBQUlQLEdBQ1RiLEtBQUtHLElBQ0pPLEtBQUtLLFlBQVksQ0FBRUMsTUFBTyxPQUFRYixLQUFBQSxNQUVuQ2UsTUFBTUMsSUFDTFQsS0FBS0ssWUFBWSxDQUFFQyxNQUFPLE1BQU9HLElBQUFBIiwiZmlsZSI6Indvcmtlci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyB3b3JrZXIgZmlsZVxyXG5jb25zdCBkYl91cmwgPSBgJHtsb2NhdGlvbi5wcm90b2NvbH0vLyR7bG9jYXRpb24uaG9zdG5hbWV9OjEzMzdgO1xyXG5cclxuY2xhc3MgQWN0aW9ucyB7XHJcbiAgc3RhdGljIGZldGNoRGF0YSh1cmwpIHtcclxuICAgIHJldHVybiBmZXRjaCh1cmwpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpO1xyXG4gIH1cclxuICBzdGF0aWMgcG9zdFJldmlldyhkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7ZGJfdXJsfS9yZXZpZXdzL2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgYm9keTogdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgPyBkYXRhIDogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgIH0pLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpO1xyXG4gIH1cclxuICBzdGF0aWMgZmF2KGlkLCBhY3QpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHtkYl91cmx9L3Jlc3RhdXJhbnRzLyR7aWR9Lz9pc19mYXZvcml0ZT0ke2FjdH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIlxyXG4gICAgfSkudGhlbihyZXMgPT4gcmVzLmpzb24oKSk7XHJcbiAgfVxyXG59XHJcblxyXG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uKHsgZGF0YTogeyB0eXBlLCAuLi5yZXN0IH0gfSkge1xyXG4gIGlmICh0eXBlID09PSBcImZldGNoX2RhdGFcIikge1xyXG4gICAgQWN0aW9ucy5mZXRjaERhdGEocmVzdCkudGhlbihkYXRhID0+IHtcclxuICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7IHN0YXRlOiBcImRvbmVcIiwgZGF0YSB9KTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJwb3N0X3Jldmlld1wiKSB7XHJcbiAgICBBY3Rpb25zLnBvc3RSZXZpZXcocmVzdClcclxuICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7IHN0YXRlOiBcImRvbmVcIiwgZGF0YSB9KTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7IHN0YXRlOiBcImVyclwiLCBlcnIgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJmYXZcIikge1xyXG4gICAgQWN0aW9ucy5mYXYocmVzdClcclxuICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7IHN0YXRlOiBcImRvbmVcIiwgZGF0YSB9KTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7IHN0YXRlOiBcImVyclwiLCBlcnIgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufSk7XHJcbiJdfQ==
